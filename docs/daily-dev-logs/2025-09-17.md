# 2025-09-17 작업 기록

## 지도 화면 고도화

- `react-native-google-places-autocomplete` 도입 후 `Main_Map.tsx`에 출발지/도착지 검색 자동완성 UI 적용, 선택 지점 마커·폴리라인 표시, 롱프레스 역지오코딩 결과를 입력란과 상태 버튼으로 연결.
- `@react-native-community/geolocation`으로 현재 위치 조회 버튼(`crosshairs`)을 구현해 기본 위치 설정과 역지오코딩 자동 입력 지원.
- 호출 버튼이 `/taxi/call` API를 연동하도록 변경해 좌표·주소를 모두 서버에 전달 후 목록 화면으로 이동 및 Alert 피드백 처리.

## 환경 변수 및 빌드 설정

- `react-native-dotenv` 적용: `babel.config.js` 플러그인 등록, `env.d.ts`와 `tsconfig.json` 포함 범위 수정으로 `@env` 모듈에서 `MAPS_API_KEY` 타입 보장.
- `taxiApp/.env`(로컬)와 `taxiApp/.env-example.md`(공유용 템플릿) 추가, 기존 `AndroidManifest.xml`의 하드코드 API 키 제거 후 플레이스홀더 유지.
- `react-native-get-random-values`를 설치하고 `index.js`에서 선호출하여 Google Places 라이브러리의 `crypto.getRandomValues` 의존성 해결.
- `patch-package`를 devDependencies에 추가하고 `patches/react-native-google-places-autocomplete+2.5.7.patch` 작성해 `predefinedPlaces` 미지정/timeout 미설정 시 발생하는 런타임 오류를 방지.

## 서버 & 목록 기능 개선

- `/taxi/call` 엔드포인트가 좌표·주소와 함께 요청 시각을 저장하도록 쿼리 확장, 호출 성공 시 기사 전체 푸시 발송 로직 유지.
- `/taxi/list` 결과에 `formatted_time` 필드를 추가해 당일 요청은 HH:mm, 나머지는 YYYY-MM-DD 형식으로 응답.
- `Main_List.tsx`에 `formatted_time` 표시 라인을 추가해 목록에서 호출 시각을 함께 확인 가능.

## 기타 메모 / TODO

- `patch-package` 실행을 위해 `package.json`에 `postinstall` 스크립트 추가 여부 점검.
